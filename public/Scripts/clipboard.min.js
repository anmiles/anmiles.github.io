(function(n,t){window[n]=t()})("clipboard",function(){if(typeof document=="undefined"||!document.addEventListener)return null;var n={};return n.copy=function(){function r(){t=!1;n=null;i&&window.getSelection().removeAllRanges();i=!1}function u(){var n=document.getSelection(),t;!document.queryCommandEnabled("copy")&&n.isCollapsed&&(t=document.createRange(),t.selectNodeContents(document.body),n.removeAllRanges(),n.addRange(t),i=!0)}var t=!1,n=null,i=!1;return document.addEventListener("copy",function(i){if(t){for(var r in n)i.clipboardData.setData(r,n[r]);i.preventDefault()}}),function(i){return new Promise(function(f,e){function o(n){try{if(document.execCommand("copy"))r(),f();else if(n){r();throw new Error("Unable to copy. Perhaps it's not available in your browser?");}else u(),o(!0)}catch(t){r();e(t)}}t=!0;typeof i=="string"?n={"text/plain":i}:i instanceof Node?n={"text/html":(new XMLSerializer).serializeToString(i)}:i instanceof Object?n=i:e("Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings.");o(!1)})}}(),n.paste=function(){var n=!1,t,i;return document.addEventListener("paste",function(r){if(n){n=!1;r.preventDefault();var u=t;t=null;u(r.clipboardData.getData(i))}}),function(r){return new Promise(function(u,f){n=!0;t=u;i=r||"text/plain";try{document.execCommand("paste")||(n=!1,f(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment.")))}catch(e){n=!1;f(new Error(e))}})}}(),typeof ClipboardEvent=="undefined"&&typeof clipboardData!="undefined"&&typeof window.clipboardData.setData!="undefined"&&(function(n){function i(n,t){return function(){n.apply(t,arguments)}}function t(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null;this._value=null;this._deferreds=[];o(n,i(f,this),i(r,this))}function u(n){var t=this;return null===this._state?void this._deferreds.push(n):void h(function(){var i=t._state?n.onFulfilled:n.onRejected,r;if(null===i)return void(t._state?n.resolve:n.reject)(t._value);try{r=i(t._value)}catch(u){return void n.reject(u)}n.resolve(r)})}function f(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if("function"==typeof t)return void o(i(t,n),i(f,this),i(r,this))}this._state=!0;this._value=n;e.call(this)}catch(u){r.call(this,u)}}function r(n){this._state=!1;this._value=n;e.call(this)}function e(){for(var n=0,t=this._deferreds.length;t>n;n++)u.call(this,this._deferreds[n]);this._deferreds=null}function s(n,t,i,r){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.resolve=i;this.reject=r}function o(n,t,i){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,i(n))})}catch(u){if(r)return;r=!0;i(u)}}var h=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)},c=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};t.prototype["catch"]=function(n){return this.then(null,n)};t.prototype.then=function(n,i){var r=this;return new t(function(t,f){u.call(r,new s(n,i,t,f))})};t.all=function(){var n=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new t(function(t,i){function u(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){u(r,n)},i)}n[r]=e;0==--f&&t(n)}catch(s){i(s)}}if(0===n.length)return t([]);for(var f=n.length,r=0;r<n.length;r++)u(r,n[r])})};t.resolve=function(n){return n&&"object"==typeof n&&n.constructor===t?n:new t(function(t){t(n)})};t.reject=function(n){return new t(function(t,i){i(n)})};t.race=function(n){return new t(function(t,i){for(var r=0,u=n.length;u>r;r++)n[r].then(t,i)})};"undefined"!=typeof module&&module.exports?module.exports=t:n.Promise||(n.Promise=t)}(this),n.copy=function(n){return new Promise(function(t,i){if(typeof n!="string"&&!("text/plain"in n))throw new Error("You must provide a text/plain type.");var r=typeof n=="string"?n:n["text/plain"],u=window.clipboardData.setData("Text",r);u?t():i(new Error("Copying was rejected."))})},n.paste=function(){return new Promise(function(n,t){var i=window.clipboardData.getData("Text");i?n(i):t(new Error("Pasting was rejected."))})}),n})
