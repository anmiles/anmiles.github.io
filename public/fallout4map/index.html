<!DOCTYPE html>
<html>
<head>
	<title>Fallout 4 map</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="DC.date" content="2019-11-14">
	<link rel="icon" href="images/favicon-32x32.png" sizes="32x32" type="image/png">
	<link rel="manifest" href="manifest.json?v={VERSION}">
	<link rel="stylesheet" href="/libs/leaflet-1.5.1.css" type="text/css">
	<link rel="stylesheet" href="/libs/leaflet.fullscreen.css" type="text/css">
	<link rel="stylesheet" href="styles/style.css?v={VERSION}" type="text/css">
	<link rel="stylesheet" href="/fonts/fontawesome.css?v={VERSION}" type="text/css">
</head>
<body>

<div id="map"></div>

<div class="search panel container" data-bind="visible: visible" style="display: none">
	<div class="section input">
		<input type="text" data-bind="attr: { placeholder: placeholder }, textInput: text, event: { keyup: search }, hasFocus: focused" />
		<!-- ko with: icon -->
			<span class="icon row" data-bind="css: typeClassName, click: $root.clearFilter">
				<i data-bind="css: fontClassName"></i><span data-bind="text: title"></span>
			</span>
		<!-- /ko -->
		<!-- ko with: type -->
			<span class="icon row type" data-bind="css: typeClassName, click: $root.clearFilter">
				<i data-bind="css: fontClassName"></i><span data-bind="text: title"></span>
			</span>
		<!-- /ko -->
	</div>
	<div class="sections" data-bind="foreach: results">
		<div class="section row" data-bind="click: navigate, css: { selected: $index() === $parent.selectedIndex() }">
			<span class="icon" data-bind="css: { visited: visited, visible: true }, class: className, attr: { title: searchTitle }"></span>
			<h3 data-bind="text: title"></h3>
		</div>
	</div>
</div>

<div class="filter panel container" data-bind="visible: visible" style="display: none">
	<!-- ko foreach: types -->
		<div class="section type" data-bind="css: name">
			<p>
				<input type="checkbox" data-bind="attr: { id: name }, checked: enabled, click: toggle"
				/><span class="title" data-bind="attr: { for: name }, text: title"></span
				>&nbsp;(<span class="count" data-bind="text: count, click: search"></span
				>)
			</p>
			<ul data-bind="foreach: icons">
				<li class="row">
					<input type="checkbox" data-bind="attr: { id: name }, checked: enabled, click: toggle"
						/><label class="row" data-bind="attr: { for: name }"
							><i class="icon" data-bind="css: className"></i
							><span data-bind="text: title"></span
							>&nbsp;(<span class="count" data-bind="text: count, click: search"></span
						>)</label>
				</li>
			</ul>
		</div>
	<!-- /ko -->
</div>

<div id="progress">
	<div data-bind="visible: total" style="display: none">
		<span data-bind="text: value"></span>%
	</div>
</div>

<script type="text/template" id="marker-template">
	<div class="icon icon-marker" data-bind="css: { visited: visited, visible: visible }, class: className"></div>
</script>

<script type="text/template" id="popup-template">
	<h3 class="row">
		<span class="title" data-bind="text: title, event: { dblclick: editTitle }"></span>
		<!-- ko if:link -->
		<a class="permalink icon icon-link" target="_blank" data-bind="attr: { href: link }"></a>
		<!-- /ko -->
	</h3>
	<input type="text" data-bind="textInput: titles.ru, visible: editMode" />
	<input type="text" data-bind="textInput: titles.en, visible: editMode" />
	<div class="row" data-bind="css: { visited: visited }" >
		<div class="row">
			<a class="button new" data-bind="click: visit">new</a>
			<a class="button visited" data-bind="click: visit">visited</a>
			<a class="button clone" data-bind="visible: editable, click: clone">clone</a>
			<a class="button delete" data-bind="visible: editable, click: deleteThis">delete</a>
		</div>
		<div class="id" data-bind="visible: editable">#<span data-bind="text: id"></span></div>
	</div>
</script>

<script type="text/template" id="bound-template">
	<div class="control container">
		<span data-bind="text: text"></span>
	</div>
</script>

<script type="text/template" id="button-template">
	<div class="control container clickable">
		<a href="#" data-bind="text: text, click: click"></div>
	</div>
</script>

<script type="text/template" id="checkButton-template">
	<div class="control container row clickable">
		<input type="checkbox" data-bind="checked: checked" />
		<label data-bind="text: text"></label>
	</div>
</script>

<!-- TODO: migrate to react -->
<script type="text/javascript" src="/libs/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="/libs/knockout-3.5.1.min.js"></script>
<script type="text/javascript" src="/libs/leaflet-1.5.1.min.js"></script>
<script type="text/javascript" src="/libs/leaflet.fullscreen.js"></script>
<script type="text/javascript" src="scripts/script.js?v={VERSION}"></script>

</body>
</html>
